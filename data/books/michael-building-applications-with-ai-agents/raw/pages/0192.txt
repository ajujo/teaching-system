Multiagent Scenarios
In multiagent systems, multiple agents collaborate to achieve shared goals, an
approach that is especially advantageous when tasks are complex and require varied
toolsets, parallel processing, or adaptability to dynamic environments. A key benefit
of multiagent systems is specialization: each agent can be assigned specific roles or
areas of expertise, allowing the system to leverage each agent’s strengths effectively.
This division of labor enables agents to focus on defined aspects of a task, which
improves efficiency and ensures that specialized tools are applied where they are most
needed. By distributing tools and responsibilities across agents, multiagent systems
address the limitations faced by single-agent systems, especially when tasks require
expertise across different domains or when the number of tools required exceeds
what a single agent can manage reliably.
Building on the single-agent supply chain example from the previous subsection, let’s
evolve it into a multiagent system. Here, we decompose the 16 tools into three speci‐
alized agents: one for inventory and warehouse management, one for transportation
and logistics, and one for supplier relations and compliance. A supervisor agent
routes queries to the appropriate specialist, embodying manager coordination
(detailed in “Manager Coordination” on page 181). This setup demonstrates speciali‐
zation by narrowing each agent’s toolset and prompt, reducing selection errors and
improving reliability. The code begins with imports and a shared response tool,
ensuring all specialists can communicate outcomes uniformly. This shared tool mini‐
mizes duplication while allowing decentralized execution:
import os
import json
import operator
from typing import Annotated, Sequence, TypedDict, Optional
from langchain_openai.chat_models import ChatOpenAI
from langchain.schema import AIMessage, BaseMessage, HumanMessage, SystemMessage
from langchain_core.messages.tool import ToolMessage
from langchain.callbacks.streaming_stdout import StreamingStdOutCallbackHandler
from langchain.tools import tool
from langgraph.graph import StateGraph, END
from traceloop.sdk import Traceloop
from src.common.observability.loki_logger import log_to_loki
os.environ["OTEL_EXPORTER_OTLP_ENDPOINT"] = "http://localhost:4317"
os.environ["OTEL_EXPORTER_OTLP_INSECURE"] = "true"
# Shared tool for all specialists
@tool
def send_logistics_response(operation_id = None, message = None):
   """Send logistics updates, recommendations, or status reports to 
170 
| 
Chapter 8: From One Agent to Many
