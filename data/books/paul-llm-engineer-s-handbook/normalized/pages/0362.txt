Chapter 9
331
class SelfQueryTemplate(PromptTemplateFactory):
    prompt: str = """You are an AI language model assistant. Your task is
to extract information from a user question.
    The required information that needs to be extracted is the user name
or user id.
    Your response should consist of only the extracted user name (e.g.,
John Doe) or id (e.g. 1345256), nothing else.
    If the user question does not contain any user name or id, you should
return the following token: none.

    For example:
    QUESTION 1:
    My name is Paul Iusztin and I want a post about...
    RESPONSE 1:
    Paul Iusztin

    QUESTION 2:
    I want to write a post about...
    RESPONSE 2:
    none

    QUESTION 3:
    My user id is 1345256 and I want to write a post about...
    RESPONSE 3:
    1345256

    User question: {question}"""
    def create_template(self) -> PromptTemplate:
        return PromptTemplate(template=self.prompt, input_
variables=["question"])
In the SelfQueryTemplate class, we define a prompt instructing the AI model to extract the user
name or ID from the input question. The prompt uses few-shot learning to guide the model on
how to respond in different scenarios. When the template is invoked, the {question} placeholder
will be replaced with the actual user question.
